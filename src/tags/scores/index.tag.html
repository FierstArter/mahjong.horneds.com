<scores>

    <div class="u-mt3">
        <div class="u-gray-l u-size-s u-mb1"> Select Number of Han</div>

        <button
            each={ item in config.yaku }
            onclick={ onSelectFan(item.value) }
            class="c-button u-mr1 u-mb1 {
                    'c-button--green': state.correctHan && item.value == state.userFans,
                    'c-button--red': !state.correctHan && item.value == state.userFans
                }">
            { item.name }
        </button>

    </div>

    <div class="u-mt3 u-upper" style="height: 2rem">

        <div class="u-upper" if={ state.userFans }>
            <span if={ state.correctHan } class="u-green u-bold"> CORRECT </span>
            <span if={ !state.correctHan } class="u-red u-bold"> WRONG </span>

            <span class="u-mh3">&nbsp;&middot;&nbsp;</span>

            <span class="u-mr2">{ state.fan } HAN:&nbsp;</span>
            <span each={ y, idx in state.yaku } class="u-red-l">
                <span if={idx}>/</span>
                { y.name } <span if={ y.fan > 1 }>({ y.fan })</span>
            </span>
            <span if={ state.dora }>
                / DORA <span if={ state.dora > 1 }>({ state.dora })</span>
            </span>
            <span if={ state.uraDora && state.hand.options.riichi }>
                / URADORA <span if={ state.uraDora > 1 }>({ state.uraDora })</span>
            </span>
        </div>

    </div>

    <select class="c-control u-mt2" ref="scores" onchange={ onSelectScores }>
        <option value="">Select Scores</option>
        <option each={ item in scores } value={ item.value } selected={ state.userScores == item.value }>
            { item.name }
        </option>
    </select>

    <div class="u-mt3 u-upper" style="height: 2rem">

        <div if={ state.userScores }>
            <span if={ state.correctScores } class="u-green u-bold"> CORRECT </span>
            <span if={ !state.correctScores } class="u-red u-bold"> WRONG </span>

            <span class="u-mh3">&nbsp;&middot;&nbsp;</span>

            <span class="u-mr3">SCORES:</span>
            <span if={ !state.hand.tsumo }>
                { state.scores.main }
            </span>
            <span if={ state.hand.tsumo }>
                <span if={ state.seatWind == 'wE' }>
                    { state.scores.additional }
                </span>
                <span if={ state.seatWind != 'wE' }>
                    { state.scores.east } / { state.scores.additional }
                </span>
            </span>

        </div>

    </div>

    <script type="text/coffeescript">
        @config = require './config'

        @mixin 'redux'
        @subscribe require './selector'
        @actions require './actions'

        @on 'mount', -> @update()

        @on 'update', ->
            @scores = @config.scores.other
            @scores = @config.scores.east if @state.seatWind == 'wE'

        @onSelectFan = (value) => =>
            @actions.showFans value

        @onSelectScores = => @actions.showScores @refs.scores.value

    </script>

</scores>
